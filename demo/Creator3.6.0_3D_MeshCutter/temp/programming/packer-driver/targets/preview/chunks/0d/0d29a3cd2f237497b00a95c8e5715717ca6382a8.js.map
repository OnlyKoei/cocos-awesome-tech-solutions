{"version":3,"sources":["file:///E:/cocos/cocos-awesome-tech-solutions/demo/Creator3.6.0_3D_MeshCutter/assets/script/cameraMove.ts"],"names":["_decorator","Component","Vec3","math","input","Input","KeyCode","ccclass","property","cameraMove","startShift","startW","startA","startS","startD","start","on","EventType","KEY_UP","onKeyUp","KEY_DOWN","onKeyDown","MOUSE_MOVE","onMouseMove","event","keyCode","SHIFT_LEFT","SHIFT_RIGHT","KEY_W","KEY_A","KEY_S","KEY_D","movementX","up","right","rotationx","node","getRotation","Quat","rotateAround","movementY","setRotation","update","deltaTime","translate"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Vec3, systemEvent, SystemEvent, math, macro, input, Input, KeyCode, EventTouch, Event } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('cameraMove')\r\nexport class cameraMove extends Component {\r\n\r\n\r\n    private startShift = false;\r\n    private startW = false;\r\n    private startA = false;\r\n    private startS = false;\r\n    private startD = false;\r\n\r\n    start() {\r\n\r\n        // //键盘监听\r\n        // systemEvent.on(SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        // systemEvent.on(SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n\r\n        // //鼠标监听\r\n        // systemEvent.on(SystemEvent.EventType.MOUSE_MOVE, this.onMouseMove, this);\r\n         //键盘监听\r\n         input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\r\n         input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\r\n \r\n         //鼠标监听\r\n         input.on(Input.EventType.MOUSE_MOVE, this.onMouseMove, this);\r\n\r\n    }\r\n\r\n    onKeyUp(event:any) {\r\n        switch (event.keyCode) {\r\n            case KeyCode.SHIFT_LEFT:\r\n            case KeyCode.SHIFT_RIGHT:\r\n                this.startShift = false;\r\n                break;\r\n            case KeyCode.KEY_W:\r\n                this.startW = false;\r\n                break;\r\n            case KeyCode.KEY_A:\r\n                this.startA = false;\r\n                break;\r\n            case KeyCode.KEY_S:\r\n                this.startS = false;\r\n                break;\r\n            case KeyCode.KEY_D:\r\n                this.startD = false;\r\n                break;\r\n        }\r\n    }\r\n\r\n    onKeyDown(event:any) {\r\n        switch (event.keyCode) {\r\n            case KeyCode.SHIFT_LEFT:\r\n            case KeyCode.SHIFT_RIGHT:\r\n                this.startShift = true;\r\n                break;\r\n            case KeyCode.KEY_W:\r\n                this.startW = true;\r\n                break;\r\n            case KeyCode.KEY_A:\r\n                this.startA = true;\r\n                break;\r\n            case KeyCode.KEY_S:\r\n                this.startS = true;\r\n                break;\r\n            case KeyCode.KEY_D:\r\n                this.startD = true;\r\n                break;\r\n        }\r\n    }\r\n\r\n    onMouseMove(event:any) {\r\n        if (event.movementX != 0 && this.startShift) {\r\n            const up = new Vec3(0, 1, 0);\r\n            const right = new Vec3(1, 0, 0);\r\n            const rotationx = this.node.getRotation();\r\n            math.Quat.rotateAround(rotationx, rotationx, up, -event.movementX / 5 / 360.0 * 3.1415926535);\r\n            math.Quat.rotateAround(rotationx, rotationx, right, -event.movementY / 2.5 / 360.0 * 3.1415926535);\r\n            this.node.setRotation(rotationx);\r\n        }\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n        if (this.startW) {\r\n\r\n            this.node.translate(new Vec3(0, deltaTime, 0));\r\n        }\r\n\r\n        if (this.startA) {\r\n\r\n            this.node.translate(new Vec3(-deltaTime, 0, 0));\r\n\r\n        }\r\n\r\n        if (this.startS) {\r\n\r\n            this.node.translate(new Vec3(0, -deltaTime, 0));\r\n\r\n        }\r\n\r\n        if (this.startD) {\r\n\r\n            this.node.translate(new Vec3(deltaTime, 0, 0));\r\n\r\n        }\r\n\r\n    }\r\n}\r\n"]}