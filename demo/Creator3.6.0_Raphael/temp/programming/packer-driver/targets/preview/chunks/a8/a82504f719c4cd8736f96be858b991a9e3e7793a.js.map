{"version":3,"sources":["file:///E:/cocos/cocos-awesome-tech-solutions/demo/Creator3.6.0_Raphael/assets/example/simplify.ts"],"names":["_decorator","Component","Node","UITransform","Vec3","director","RPath","ccclass","tempPoint","Simplify","path","points","onLoad","addComponent","fillColor","lineWidth","showHandles","node","on","EventType","TOUCH_START","onTouchBegan","TOUCH_MOVE","onTouchMoved","TOUCH_END","onTouchEnded","event","touchLoc","getUILocation","com","parent","getComponent","convertToNodeSpaceAR","x","y","push","simplify","update","dt","backToList","loadScene"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAUC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,Q,OAAAA,Q;;AAE/CC,MAAAA,K,iBAAAA,K;;;;;;;;;OADH;AAAEC,QAAAA;AAAF,O,GAAcP,U;AAEhBQ,MAAAA,S,GAAY,IAAIJ,IAAJ,E;;0BAEHK,Q,WADZF,OAAO,CAAC,UAAD,C,gBAAR,MACaE,QADb,SAC8BR,SAD9B,CACwC;AAAA;AAAA;AAAA,eACpCS,IADoC,GAC7B,IAD6B;AAAA,eAEpCC,MAFoC,GAE3B,EAF2B;AAAA;;AAGpCC,QAAAA,MAAM,GAAI;AACN,eAAKF,IAAL,GAAY,KAAKG,YAAL;AAAA;AAAA,6BAAZ;AACA,eAAKH,IAAL,CAAUI,SAAV,GAAsB,MAAtB;AACA,eAAKJ,IAAL,CAAUK,SAAV,GAAsB,CAAtB;AACA,eAAKL,IAAL,CAAUM,WAAV,GAAwB,IAAxB;AACA,eAAKC,IAAL,CAAUC,EAAV,CAAahB,IAAI,CAACiB,SAAL,CAAeC,WAA5B,EAAyC,KAAKC,YAA9C,EAA4D,IAA5D;AACA,eAAKJ,IAAL,CAAUC,EAAV,CAAahB,IAAI,CAACiB,SAAL,CAAeG,UAA5B,EAAwC,KAAKC,YAA7C,EAA2D,IAA3D;AACA,eAAKN,IAAL,CAAUC,EAAV,CAAahB,IAAI,CAACiB,SAAL,CAAeK,SAA5B,EAAuC,KAAKC,YAA5C,EAA0D,IAA1D;AACH;;AAEDJ,QAAAA,YAAY,CAAEK,KAAF,EAAc;AACtB,cAAIC,QAAQ,GAAGD,KAAK,CAACE,aAAN,EAAf,CADsB,CAEtB;AACA;;AACA,eAAKjB,MAAL,GAAc,EAAd;AAEA,cAAIkB,GAAG,GAAG,KAAKZ,IAAL,CAAUa,MAAV,CAAiBC,YAAjB,CAA8B5B,WAA9B,CAAV;AAEAwB,UAAAA,QAAQ,GAAGE,GAAG,CAACG,oBAAJ,CAAyB,IAAI5B,IAAJ,CAASuB,QAAQ,CAACM,CAAlB,EAAoBN,QAAQ,CAACO,CAA7B,EAA+B,CAA/B,CAAzB,CAAX;AACA,eAAKvB,MAAL,GAAc,CAACgB,QAAD,CAAd;AACA,iBAAO,IAAP;AACH;;AAEDJ,QAAAA,YAAY,CAAEG,KAAF,EAAc;AACtB,cAAIC,QAAQ,GAAGD,KAAK,CAACE,aAAN,EAAf;AACA,cAAIC,GAAG,GAAG,KAAKZ,IAAL,CAAUa,MAAV,CAAiBC,YAAjB,CAA8B5B,WAA9B,CAAV;AACAwB,UAAAA,QAAQ,GAAGE,GAAG,CAACG,oBAAJ,CAAyB,IAAI5B,IAAJ,CAASuB,QAAQ,CAACM,CAAlB,EAAoBN,QAAQ,CAACO,CAA7B,EAA+B,CAA/B,CAAzB,CAAX;AACA,eAAKvB,MAAL,CAAYwB,IAAZ,CAAiBR,QAAjB;AACA,eAAKjB,IAAL,CAAUC,MAAV,CAAiB,KAAKA,MAAtB;AACH;;AAEDc,QAAAA,YAAY,CAAEC,KAAF,EAAc;AACtB,eAAKhB,IAAL,CAAUC,MAAV,CAAiB,KAAKA,MAAtB;AACA,eAAKD,IAAL,CAAU0B,QAAV;AACH;;AAEDC,QAAAA,MAAM,CAAEC,EAAF,EAAW,CAChB;;AAEDC,QAAAA,UAAU,GAAE;AACRlC,UAAAA,QAAQ,CAACmC,SAAT,CAAmB,UAAnB;AACH;;AA5CmC,O","sourcesContent":["import { _decorator, Component,Node, UITransform, Vec3, director } from 'cc';\r\nconst { ccclass } = _decorator;\r\nimport { RPath } from '../raphael/RPath';\r\nlet tempPoint = new Vec3()\r\n@ccclass('Simplify')\r\nexport class Simplify extends Component {\r\n    path = null;\r\n    points = [];\r\n    onLoad () {\r\n        this.path = this.addComponent(RPath);\r\n        this.path.fillColor = 'none';\r\n        this.path.lineWidth = 5;\r\n        this.path.showHandles = true;\r\n        this.node.on(Node.EventType.TOUCH_START, this.onTouchBegan, this);\r\n        this.node.on(Node.EventType.TOUCH_MOVE, this.onTouchMoved, this);\r\n        this.node.on(Node.EventType.TOUCH_END, this.onTouchEnded, this);\r\n    }\r\n\r\n    onTouchBegan (event: any) {\r\n        let touchLoc = event.getUILocation();\r\n        // console.log(touchLoc ,'  touch',touch)\r\n        // console.log(event ,'  event')\r\n        this.points = [];\r\n\r\n        let com = this.node.parent.getComponent(UITransform);\r\n\r\n        touchLoc = com.convertToNodeSpaceAR(new Vec3(touchLoc.x,touchLoc.y,0) );\r\n        this.points = [touchLoc];\r\n        return true;\r\n    }\r\n\r\n    onTouchMoved (event: any) {\r\n        let touchLoc = event.getUILocation();\r\n        let com = this.node.parent.getComponent(UITransform);\r\n        touchLoc = com.convertToNodeSpaceAR(new Vec3(touchLoc.x,touchLoc.y,0));\r\n        this.points.push(touchLoc);\r\n        this.path.points(this.points);\r\n    }\r\n\r\n    onTouchEnded (event: any) {\r\n        this.path.points(this.points);\r\n        this.path.simplify();\r\n    }\r\n\r\n    update (dt: any) {\r\n    }\r\n\r\n    backToList(){\r\n        director.loadScene('TestList');\r\n    }\r\n\r\n}\r\n\r\n"]}