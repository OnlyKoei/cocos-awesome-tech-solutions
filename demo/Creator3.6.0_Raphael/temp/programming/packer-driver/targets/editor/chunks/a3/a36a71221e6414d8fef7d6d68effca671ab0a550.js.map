{"version":3,"sources":["file:///E:/cocos/cocos-awesome-tech-solutions/demo/Creator3.6.0_Raphael/assets/raphael/utils/R.tesselateBezier.ts"],"names":["tesselateBezier","tessTol","abs","Math","tesselateBezierFunc","x1","y1","x2","y2","x3","y3","x4","y4","level","points","tessTolSclae","x12","y12","x23","y23","x34","y34","x123","y123","x234","y234","x1234","y1234","dx","dy","d2","d3","push"],"mappings":"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","sourcesContent":["/**\r\n * 注意：已把原脚本注释，由于脚本变动过大，转换的时候可能有遗落，需要自行手动转换\r\n */\r\n// var tessTol = 0.25;\r\n// \r\n// var abs = Math.abs;\r\n// \r\n// function tesselateBezier (x1, y1, x2, y2, x3, y3, x4, y4, level, points, tessTolSclae) {\r\n//     tessTolSclae = tessTolSclae || 1;\r\n// \r\n//     var x12, y12, x23, y23, x34, y34, x123, y123, x234, y234, x1234, y1234;\r\n//     var dx, dy, d2, d3;\r\n// \r\n//     if (level > 10) return;\r\n// \r\n//     x12 = (x1 + x2) * 0.5;\r\n//     y12 = (y1 + y2) * 0.5;\r\n//     x23 = (x2 + x3) * 0.5;\r\n//     y23 = (y2 + y3) * 0.5;\r\n//     x34 = (x3 + x4) * 0.5;\r\n//     y34 = (y3 + y4) * 0.5;\r\n//     x123 = (x12 + x23) * 0.5;\r\n//     y123 = (y12 + y23) * 0.5;\r\n// \r\n//     dx = x4 - x1;\r\n//     dy = y4 - y1;\r\n//     d2 = abs((x2 - x4) * dy - (y2 - y4) * dx);\r\n//     d3 = abs((x3 - x4) * dy - (y3 - y4) * dx);\r\n// \r\n//     if ((d2 + d3) * (d2 + d3) < tessTol * tessTolSclae * (dx * dx + dy * dy)) {\r\n//         points.push(x4);\r\n//         points.push(y4);\r\n//         return;\r\n//     }\r\n// \r\n//     x234 = (x23 + x34) * 0.5;\r\n//     y234 = (y23 + y34) * 0.5;\r\n//     x1234 = (x123 + x234) * 0.5;\r\n//     y1234 = (y123 + y234) * 0.5;\r\n// \r\n//     tesselateBezier(x1, y1, x12, y12, x123, y123, x1234, y1234, level + 1, points, tessTolSclae);\r\n//     tesselateBezier(x1234, y1234, x234, y234, x34, y34, x4, y4, level + 1, points, tessTolSclae);\r\n// }\r\n// \r\n// module.exports = tesselateBezier;\r\nlet tessTol = 0.25;\r\nlet abs = Math.abs;\r\nexport default class tesselateBezier {\r\n    public tesselateBezierFunc(x1, y1, x2, y2, x3, y3, x4, y4, level, points, tessTolSclae) {\r\n        tessTolSclae = tessTolSclae || 1;\r\n\r\n        var x12, y12, x23, y23, x34, y34, x123, y123, x234, y234, x1234, y1234;\r\n        var dx, dy, d2, d3;\r\n\r\n        if (level > 10) return;\r\n\r\n        x12 = (x1 + x2) * 0.5;\r\n        y12 = (y1 + y2) * 0.5;\r\n        x23 = (x2 + x3) * 0.5;\r\n        y23 = (y2 + y3) * 0.5;\r\n        x34 = (x3 + x4) * 0.5;\r\n        y34 = (y3 + y4) * 0.5;\r\n        x123 = (x12 + x23) * 0.5;\r\n        y123 = (y12 + y23) * 0.5;\r\n\r\n        dx = x4 - x1;\r\n        dy = y4 - y1;\r\n        d2 = abs((x2 - x4) * dy - (y2 - y4) * dx);\r\n        d3 = abs((x3 - x4) * dy - (y3 - y4) * dx);\r\n\r\n        if ((d2 + d3) * (d2 + d3) < tessTol * tessTolSclae * (dx * dx + dy * dy)) {\r\n            points.push(x4);\r\n            points.push(y4);\r\n            return;\r\n        }\r\n\r\n        x234 = (x23 + x34) * 0.5;\r\n        y234 = (y23 + y34) * 0.5;\r\n        x1234 = (x123 + x234) * 0.5;\r\n        y1234 = (y123 + y234) * 0.5;\r\n\r\n        this.tesselateBezierFunc(x1, y1, x12, y12, x123, y123, x1234, y1234, level + 1, points, tessTolSclae);\r\n        this.tesselateBezierFunc(x1234, y1234, x234, y234, x34, y34, x4, y4, level + 1, points, tessTolSclae);\r\n    }\r\n}\r\n"]}