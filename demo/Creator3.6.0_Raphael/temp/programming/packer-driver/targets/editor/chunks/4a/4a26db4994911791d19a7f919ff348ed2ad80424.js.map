{"version":3,"sources":["file:///E:/cocos/cocos-awesome-tech-solutions/demo/Creator3.6.0_Raphael/assets/demo/nardove/tentacle.ts"],"names":["_decorator","Component","Vec2","Graphics","ccclass","Tentacle","path","numSegments","segmentLength","points","anchor","onLoad","init","group","length","addPath","fillColor","Math","random","i","push","lineCap","LineCap","ROUND","update","x","y","px","py","pt","len"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,Q,OAAAA,Q;;;;;;;;;OAChC;AAAEC,QAAAA;AAAF,O,GAAcJ,U;;0BAGPK,Q,WADZD,OAAO,CAAC,UAAD,C,gBAAR,MACaC,QADb,SAC8BJ,SAD9B,CACwC;AAAA;AAAA;AAAA,eACpCK,IADoC,GAC7B,IAD6B;AAAA,eAEpCC,WAFoC,GAEtB,IAFsB;AAAA,eAGpCC,aAHoC,GAGpB,IAHoB;AAAA,eAIpCC,MAJoC,GAI3B,EAJ2B;AAAA,eAKpCC,MALoC,GAK3B,IAL2B;AAAA;;AAMpCC,QAAAA,MAAM,GAAI,CACT;;AAEDC,QAAAA,IAAI,CAAEC,KAAF,EAAcN,WAAd,EAAgCO,MAAhC,EAA6C;AAC7C,eAAKR,IAAL,GAAYO,KAAK,CAACE,OAAN,EAAZ;AACA,eAAKT,IAAL,CAAUU,SAAV,GAAsB,MAAtB;AACA,eAAKT,WAAL,GAAmBA,WAAnB;AACA,eAAKC,aAAL,GAAqBS,IAAI,CAACC,MAAL,KAAgB,CAAhB,GAAoBJ,MAApB,GAA6B,CAAlD;;AACA,eAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKZ,WAAzB,EAAsCY,CAAC,EAAvC,EAA2C;AACxC,iBAAKV,MAAL,CAAYW,IAAZ,CAAiB,IAAIlB,IAAJ,CAAS,CAAT,EAAYiB,CAAC,GAAG,KAAKX,aAArB,CAAjB;AACF;;AACD,eAAKF,IAAL,CAAUe,OAAV,GAAoBlB,QAAQ,CAACmB,OAAT,CAAiBC,KAArC;AACA,eAAKb,MAAL,GAAc,KAAKD,MAAL,CAAY,CAAZ,CAAd;AACH;;AAEDe,QAAAA,MAAM,GAAI;AACN,eAAKf,MAAL,CAAY,CAAZ,EAAegB,CAAf,GAAmB,KAAKf,MAAL,CAAYe,CAA/B;AACA,eAAKhB,MAAL,CAAY,CAAZ,EAAeiB,CAAf,GAAmB,KAAKhB,MAAL,CAAYgB,CAAZ,GAAgB,CAAnC;;AACA,eAAK,IAAIP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKZ,WAAzB,EAAsCY,CAAC,EAAvC,EAA2C;AACxC,gBAAIQ,EAAE,GAAG,KAAKlB,MAAL,CAAYU,CAAZ,EAAeM,CAAf,GAAmB,KAAKhB,MAAL,CAAYU,CAAC,GAAC,CAAd,EAAiBM,CAA7C;AACA,gBAAIG,EAAE,GAAG,KAAKnB,MAAL,CAAYU,CAAZ,EAAeO,CAAf,GAAmB,KAAKjB,MAAL,CAAYU,CAAC,GAAC,CAAd,EAAiBO,CAA7C;AACA,gBAAIG,EAAE,GAAG,IAAI3B,IAAJ,CAASyB,EAAT,EAAaC,EAAb,CAAT;AACA,gBAAIE,GAAG,GAAGD,EAAE,CAACf,MAAH,EAAV;;AACA,gBAAIgB,GAAG,GAAG,GAAV,EAAe;AACX,mBAAKrB,MAAL,CAAYU,CAAZ,EAAeM,CAAf,GAAmB,KAAKhB,MAAL,CAAYU,CAAC,GAAC,CAAd,EAAiBM,CAAjB,GAAsBI,EAAE,CAACJ,CAAH,GAAO,KAAKjB,aAAb,GAA8BsB,GAAtE;AACA,mBAAKrB,MAAL,CAAYU,CAAZ,EAAeO,CAAf,GAAmB,KAAKjB,MAAL,CAAYU,CAAC,GAAC,CAAd,EAAiBO,CAAjB,GAAsBG,EAAE,CAACH,CAAH,GAAO,KAAKlB,aAAb,GAA8BsB,GAAtE;AACH;AACH;;AACD,eAAKxB,IAAL,CAAUG,MAAV,CAAiB,KAAKA,MAAtB;AACH;;AAnCmC,O","sourcesContent":["import { _decorator, Component, Vec2, Graphics } from 'cc';\r\nconst { ccclass } = _decorator;\r\n\r\n@ccclass('Tentacle')\r\nexport class Tentacle extends Component {\r\n    path = null;\r\n    numSegments = null;\r\n    segmentLength = null;\r\n    points = [];\r\n    anchor = null;\r\n    onLoad () {\r\n    }\r\n\r\n    init (group: any, numSegments: any, length: any) {\r\n        this.path = group.addPath();\r\n        this.path.fillColor = 'none';\r\n        this.numSegments = numSegments;\r\n        this.segmentLength = Math.random() * 1 + length - 1;\r\n        for (var i = 0; i < this.numSegments; i++) {\r\n           this.points.push(new Vec2(0, i * this.segmentLength));\r\n        }\r\n        this.path.lineCap = Graphics.LineCap.ROUND;\r\n        this.anchor = this.points[0];\r\n    }\r\n\r\n    update () {\r\n        this.points[1].x = this.anchor.x;\r\n        this.points[1].y = this.anchor.y - 1;\r\n        for (let i = 2; i < this.numSegments; i++) {\r\n           var px = this.points[i].x - this.points[i-2].x;\r\n           var py = this.points[i].y - this.points[i-2].y;\r\n           var pt = new Vec2(px, py);\r\n           var len = pt.length();\r\n           if (len > 0.0) {\r\n               this.points[i].x = this.points[i-1].x + (pt.x * this.segmentLength) / len;\r\n               this.points[i].y = this.points[i-1].y + (pt.y * this.segmentLength) / len;\r\n           }\r\n        }\r\n        this.path.points(this.points);\r\n    }\r\n\r\n}\r\n\r\n"]}