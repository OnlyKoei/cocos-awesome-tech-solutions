const _0x8cfb=['send','-vip-btn','style','join','generateStyle','call','methods','openPanelBtn','isVip','close','innerText','classList','showToolbar','add','addEventListener','newMsgCount','save-toolbar-info','show-panel','click','toString','toolbar','removeBroadcastListener','title',':update-toolbar','path','utf8','contains','readFileSync','Message','setAttribute','__importDefault','-msg-counter','_onUpdateToolbar','./style-generator','remove','ready','removeEventListener','-non-vip-btn-double-digits-msgs','msgCounter','defineProperty','get-saved-toolbar-info','buttonTitle','-non-vip-btn','-toolbar','-hide','./toolbar.html','default'];(function(_0xd3bfa,_0x30805e){const _0x8cfb07=function(_0x2be646){while(--_0x2be646){_0xd3bfa['push'](_0xd3bfa['shift']());}};_0x8cfb07(++_0x30805e);}(_0x8cfb,0x17f));const _0x2be6=function(_0xd3bfa,_0x30805e){_0xd3bfa=_0xd3bfa-0xb9;let _0x8cfb07=_0x8cfb[_0xd3bfa];return _0x8cfb07;};const _0x5aa042=_0x2be6;'use strict';var __importDefault=this&&this[_0x5aa042(0xd0)]||function(_0x1f72cb){return _0x1f72cb&&_0x1f72cb['__esModule']?_0x1f72cb:{'default':_0x1f72cb};};Object[_0x5aa042(0xd9)](exports,'__esModule',{'value':!0x0}),exports[_0x5aa042(0xbb)]=exports[_0x5aa042(0xd5)]=exports['methods']=exports['$']=exports[_0x5aa042(0xe3)]=exports['template']=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(_0x5aa042(0xca))),style_generator_1=require(_0x5aa042(0xd3)),namespace_1=require('../constant/namespace'),template=fs_1[_0x5aa042(0xe0)][_0x5aa042(0xcd)](path_1['default'][_0x5aa042(0xe4)](__dirname,_0x5aa042(0xdf)),_0x5aa042(0xcb));exports['template']=template;const style=style_generator_1[_0x5aa042(0xe5)]();exports['style']=style;const selector={'toolbar':'.'+namespace_1['ns']+_0x5aa042(0xdd),'openPanelBtn':'.'+namespace_1['ns']+'-btn','msgCounter':'.'+namespace_1['ns']+_0x5aa042(0xd1)};exports['$']=selector;const methods={'updateToolbar'(_0x58ae67={}){const _0x40b1dd=_0x5aa042;void 0x0!==_0x58ae67[_0x40b1dd(0xbe)]&&setElementVisibility(this['$'][_0x40b1dd(0xc6)],_0x58ae67[_0x40b1dd(0xbe)]),void 0x0!==_0x58ae67[_0x40b1dd(0xdb)]&&this['$'][_0x40b1dd(0xb9)][_0x40b1dd(0xcf)](_0x40b1dd(0xc8),_0x58ae67['buttonTitle']),void 0x0!==_0x58ae67['isVip']&&(_0x58ae67[_0x40b1dd(0xba)]?(this['$'][_0x40b1dd(0xb9)][_0x40b1dd(0xbd)][_0x40b1dd(0xd4)](namespace_1['ns']+_0x40b1dd(0xdc)),this['$'][_0x40b1dd(0xb9)][_0x40b1dd(0xbd)][_0x40b1dd(0xbf)](namespace_1['ns']+_0x40b1dd(0xe2))):(this['$'][_0x40b1dd(0xb9)]['classList'][_0x40b1dd(0xd4)](namespace_1['ns']+_0x40b1dd(0xe2)),this['$'][_0x40b1dd(0xb9)][_0x40b1dd(0xbd)][_0x40b1dd(0xbf)](namespace_1['ns']+_0x40b1dd(0xdc))));const _0x10a3cc=_0x58ae67[_0x40b1dd(0xc1)];void 0x0!==_0x10a3cc&&(this['$'][_0x40b1dd(0xc6)][_0x40b1dd(0xbd)][_0x40b1dd(0xd4)](namespace_1['ns']+'-non-vip-btn-single-digit-msgs'),this['$'][_0x40b1dd(0xc6)][_0x40b1dd(0xbd)][_0x40b1dd(0xd4)](namespace_1['ns']+_0x40b1dd(0xd7)),0x0===_0x10a3cc?(setElementVisibility(this['$'][_0x40b1dd(0xd8)],!0x1),this['$']['msgCounter'][_0x40b1dd(0xbc)]='0'):(setElementVisibility(this['$'][_0x40b1dd(0xd8)],!0x0),this['$'][_0x40b1dd(0xd8)][_0x40b1dd(0xbc)]=_0x10a3cc>0x63?'99':_0x10a3cc[_0x40b1dd(0xc5)](),_0x58ae67[_0x40b1dd(0xba)]||(_0x10a3cc>=0xa?this['$'][_0x40b1dd(0xc6)][_0x40b1dd(0xbd)][_0x40b1dd(0xbf)](namespace_1['ns']+_0x40b1dd(0xd7)):this['$'][_0x40b1dd(0xc6)]['classList'][_0x40b1dd(0xbf)](namespace_1['ns']+'-non-vip-btn-single-digit-msgs'))));const _0x462309={'showToolbar':getElementVisibility(this['$']['toolbar']),'isVip':this['$'][_0x40b1dd(0xb9)]['classList'][_0x40b1dd(0xcc)](namespace_1['ns']+'-vip-btn'),'newMsgCount':parseInt(this['$'][_0x40b1dd(0xd8)][_0x40b1dd(0xbc)])||0x0};Editor[_0x40b1dd(0xce)][_0x40b1dd(0xe1)](namespace_1['ns'],_0x40b1dd(0xc2),_0x462309);}};async function ready(){const _0x3ff3f4=_0x5aa042;this[_0x3ff3f4(0xd2)]=_0x18af14=>{const _0x5148a3=_0x3ff3f4;methods['updateToolbar'][_0x5148a3(0xe6)](this,_0x18af14);},Editor[_0x3ff3f4(0xce)]['addBroadcastListener'](namespace_1['ns']+_0x3ff3f4(0xc9),this[_0x3ff3f4(0xd2)]),this['$'][_0x3ff3f4(0xb9)][_0x3ff3f4(0xc0)](_0x3ff3f4(0xc4),onClickShowPanel);const _0x11468b=await Editor[_0x3ff3f4(0xce)]['request'](namespace_1['ns'],_0x3ff3f4(0xda));_0x11468b&&this['_onUpdateToolbar'](_0x11468b);}function close(){const _0xe17e57=_0x5aa042;Editor[_0xe17e57(0xce)][_0xe17e57(0xc7)](namespace_1['ns']+_0xe17e57(0xc9),this['_onUpdateToolbar']),this['$'][_0xe17e57(0xb9)][_0xe17e57(0xd6)]('click',onClickShowPanel);}function setElementVisibility(_0x5d6d1d,_0x3b565a){const _0xe29655=_0x5aa042;_0x3b565a?_0x5d6d1d[_0xe29655(0xbd)]['remove'](namespace_1['ns']+_0xe29655(0xde)):_0x5d6d1d[_0xe29655(0xbd)][_0xe29655(0xbf)](namespace_1['ns']+'-hide');}function getElementVisibility(_0x1fc33c){const _0x5c1c0e=_0x5aa042;return!_0x1fc33c[_0x5c1c0e(0xbd)][_0x5c1c0e(0xcc)](namespace_1['ns']+_0x5c1c0e(0xde));}function onClickShowPanel(){const _0x2a13f6=_0x5aa042;Editor['Message']['send'](namespace_1['ns'],_0x2a13f6(0xc3));}exports[_0x5aa042(0xe7)]=methods,exports['ready']=ready,exports[_0x5aa042(0xbb)]=close;